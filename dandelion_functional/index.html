<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="David Leon (Dawei Leng)">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>dandelion.functional - Dandelion</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "dandelion.functional";
    var mkdocs_page_input_path = "dandelion_functional.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Dandelion</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../tutorial I - Sentence Topic Classification/">I - Sentence Topic Classification</a>
                </li>
                <li class="">
                    
    <a class="" href="../tutorial II - Write Your Own Module/">II - Write Your Own Module</a>
                </li>
                <li class="">
                    
    <a class="" href="../howtos/">III - Howtos</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Framework Interface</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../dandelion_module/">dandelion.module</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">dandelion.functional</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#pool_1d">pool_1d</a></li>
    

    <li class="toctree-l3"><a href="#pool_2d">pool_2d</a></li>
    

    <li class="toctree-l3"><a href="#pool_3d">pool_3d</a></li>
    

    <li class="toctree-l3"><a href="#align_crop">align_crop</a></li>
    

    <li class="toctree-l3"><a href="#spatial_pyramid_pooling">spatial_pyramid_pooling</a></li>
    

    <li class="toctree-l3"><a href="#upsample_2d">upsample_2d</a></li>
    

    <li class="toctree-l3"><a href="#upsample_2d_bilinear">upsample_2d_bilinear</a></li>
    

    <li class="toctree-l3"><a href="#channel_shuffle">channel_shuffle</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_objective/">dandelion.objective</a>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_activation/">dandelion.activation</a>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_update/">dandelion.update</a>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_initialization/">dandelion.initialization</a>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_util/">dandelion.util</a>
                </li>
                <li class="">
                    
    <a class="" href="../dandelion_model/">dandelion.model</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Extensions</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../dandelion_ext_CV/">dandelion.ext.CV</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../history/">History</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Dandelion</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Framework Interface &raquo;</li>
        
      
    
    <li>dandelion.functional</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="pool_1d">pool_1d</h2>
<p>Pooling 1 dimension along the given axis, support for any dimensional input.</p>
<pre><code class="python">pool_1d(x, ws=2, ignore_border=True, stride=None, pad=0, mode='max', axis=-1)
</code></pre>

<ul>
<li><strong>ws</strong>: scalar int. Factor by which to downsample the input</li>
<li><strong>ignore_border</strong>: bool. When <code>True</code>, dimension size=5 with <code>ws</code>=2 will generate a dimension size=2 output. 3 otherwise.</li>
<li><strong>stride</strong>: scalar int. The number of shifts over rows/cols to get the next pool region. If stride is None, it is considered equal to ws (no overlap on pooling regions), eg: <code>stride</code>=1 will shifts over one row for every iteration.</li>
<li><strong>pad</strong>: pad zeros to extend beyond border of the input</li>
<li><strong>mode</strong>: {<code>max</code>, <code>sum</code>, <code>average_inc_pad</code>, <code>average_exc_pad</code>}. Operation executed on each window. <code>max</code> and <code>sum</code> always exclude the padding in the computation. <code>average</code> gives you the choice to include or exclude it.</li>
<li><strong>axis</strong>: scalar int. Specify along which axis the pooling will be done</li>
</ul>
<hr />
<h2 id="pool_2d">pool_2d</h2>
<p>Pooling 2 dimension along the last 2 dimensions of input, support for any dimensional input with <code>ndim</code>&gt;=2.</p>
<pre><code class="python">pool_2d(x, ws=(2,2), ignore_border=True, stride=None, pad=(0,0), mode='max')
</code></pre>

<ul>
<li><strong>ws</strong>: scalar tuple. Factor by which to downsample the input</li>
<li><strong>ignore_border</strong>: bool. When <code>True</code>, (5,5) input with <code>ws</code>=(2,2) will generate a (2,2) output. (3,3) otherwise.</li>
<li><strong>stride</strong>: scalar tuple. The number of shifts over rows/cols to get the next pool region. If stride is None, it is considered equal to ws (no overlap on pooling regions), eg: <code>stride</code>=(1,1) will shifts over one row and one column for every iteration.</li>
<li><strong>pad</strong>: pad zeros to extend beyond border of the input</li>
<li><strong>mode</strong>: {<code>max</code>, <code>sum</code>, <code>average_inc_pad</code>, <code>average_exc_pad</code>}. Operation executed on each window. <code>max</code> and <code>sum</code> always exclude the padding in the computation. <code>average</code> gives you the choice to include or exclude it.</li>
</ul>
<hr />
<h2 id="pool_3d">pool_3d</h2>
<p>Pooling 3 dimension along the last 3 dimensions of input, support for any dimensional input with <code>ndim</code>&gt;=3.</p>
<pre><code class="python">pool_3d(x, ws=(2,2,2), ignore_border=True, stride=None, pad=(0,0,0), mode='max')
</code></pre>

<ul>
<li><strong>ws</strong>: scalar tuple. Factor by which to downsample the input</li>
<li><strong>ignore_border</strong>: bool. When <code>True</code>, (5,5,5) input with <code>ws</code>=(2,2,2) will generate a (2,2,2) output. (3,3,3) otherwise.</li>
<li><strong>stride</strong>: scalar tuple. The number of shifts over rows/cols to get the next pool region. If stride is None, it is considered equal to ws (no overlap on pooling regions).</li>
<li><strong>pad</strong>: pad zeros to extend beyond border of the input</li>
<li><strong>mode</strong>: {<code>max</code>, <code>sum</code>, <code>average_inc_pad</code>, <code>average_exc_pad</code>}. Operation executed on each window. <code>max</code> and <code>sum</code> always exclude the padding in the computation. <code>average</code> gives you the choice to include or exclude it.</li>
</ul>
<hr />
<h2 id="align_crop">align_crop</h2>
<p>Align a list of tensors at each axis by specified rules and crop them to make axis concatenation possible.</p>
<pre><code class="python">align_crop(tensor_list, cropping)
</code></pre>

<ul>
<li><strong>tensor_list</strong>: list of tensors to be processed, they much have the same <code>ndim</code>s.</li>
<li><strong>cropping</strong>: list of cropping rules for each dimension. Acceptable rules include {<code>None</code>|<code>lower</code>|<code>upper</code>|<code>center</code>}. </li>
<li><code>None</code>: this axis is not cropped, tensors are unchanged in this axis</li>
<li><code>lower</code>: tensors are cropped choosing the lower portion in this axis as <code>a[:crop_size, ...]</code></li>
<li><code>upper</code>: tensors are cropped choosing the upper portion in this axis as <code>a[-crop_size:, ...]</code></li>
<li><code>center</code>: tensors are cropped choosing the central portion in this axis as <code>a[offset:offset+crop_size, ...]</code> where <code>offset = (a.shape[0]-crop_size)//2)</code></li>
</ul>
<hr />
<h2 id="spatial_pyramid_pooling">spatial_pyramid_pooling</h2>
<p>Spatial pyramid pooling. This function will use different scale pooling pyramid to generate spatially fix-sized output no matter the spatial size of input, useful when CNN+FC used for image classification or detection with variable-sized samples.</p>
<pre><code class="python">spatial_pyramid_pooling(x, pyramid_dims=(6, 4, 2, 1), mode='max', implementation='fast')
</code></pre>

<ul>
<li><strong>x</strong>: 4D tensor with shape (B, C, H, W)</li>
<li><strong>pyramid_dims</strong>: list or tuple of integers. Refer to Ref[1] for details.</li>
<li><strong>mode</strong>: {<code>max</code>, <code>sum</code>, <code>average_inc_pad</code>, <code>average_exc_pad</code>}. Operation executed on each window. <code>max</code> and <code>sum</code> always exclude the padding in the computation. <code>average</code> gives you the choice to include or exclude it.</li>
<li><strong>implementation</strong>: {<code>fast</code>, <code>fast_ls</code>, <code>stretch</code>}.</li>
<li><code>fast</code>: The 'fast' implementation is fast and pad zero when input size is too small.</li>
<li><code>fast_ls</code>: The 'fast_ls' implementation is same as Lasagne fast implementation. The size of the input map MUST be larger than the output map size.</li>
<li><code>stretch</code>: The 'stretch' implementation is slower. The implementation will get same feature at some position just like nearest neighbor interpolation when the input size is less than the output size.</li>
</ul>
<p><sub>Ref [1]: He, Kaiming et al (2015), Spatial Pyramid Pooling in Deep Convolutional Networks for Visual Recognition. <a href="http://arxiv.org/pdf/1406.4729.pdf">http://arxiv.org/pdf/1406.4729.pdf</a></sub></p>
<hr />
<h2 id="upsample_2d">upsample_2d</h2>
<p>Upsample 2 dimension along the last 2 dimensions of input, support for any dimensional input with <code>ndim</code>&gt;=2. Only integer upsampling ratio supported.</p>
<pre><code class="python">upsample_2d(x, ratio, mode='repeat')
</code></pre>

<ul>
<li><strong>ratio</strong>: ust be integer or tuple of integers &gt;=1</li>
<li><strong>mode</strong>: {<code>repeat</code>, <code>dilate</code>}. Repeat element values or upsample leaving zeroes between upsampled elements. Default <code>repeat</code>.</li>
</ul>
<hr />
<h2 id="upsample_2d_bilinear">upsample_2d_bilinear</h2>
<p>Upsample 2D with bilinear interpolation. Support for fractional ratio, and only apply for 4D tensor.</p>
<pre><code class="python">upsample_2d_bilinear(x, ratio=None, frac_ratio=None, use_1D_kernel=True)
</code></pre>

<ul>
<li><strong>ratio</strong>: ust be integer or tuple of integers &gt;=1. You can only specify either <code>ratio</code> or <code>frac_ratio</code>, not both.</li>
<li><strong>frac_ratio</strong>: None, tuple of int or tuple of tuples of int. A fractional upsampling scale is described by (numerator, denominator).</li>
<li><strong>use_1D_kernel</strong>: only for speed matter.</li>
</ul>
<p>Note: due to Theano's implementation, when the upsampling ratio is even, the last row and column is repeated one extra time compared to the first row and column which makes the upsampled tensor asymmetrical on both sides. This does not happen when the upsampling ratio is odd.</p>
<hr />
<h2 id="channel_shuffle">channel_shuffle</h2>
<p>Pseudo shuffling channel by dimshuffle &amp; reshape, first introduced in <a href="https://arxiv.org/abs/1610.02357">ShuffleNet</a></p>
<pre><code class="python">channel_shuffle(x, group_num)
</code></pre>

<ul>
<li><strong>x</strong>: 4D tensor, with shape <code>(B, C, H, W)</code>, usually output of a 2D convolution.</li>
<li><strong>group_num</strong>: int scalar, and <code>C</code> must be divisible by <code>group_num</code></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dandelion_objective/" class="btn btn-neutral float-right" title="dandelion.objective">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dandelion_module/" class="btn btn-neutral" title="dandelion.module"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../dandelion_module/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../dandelion_objective/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
